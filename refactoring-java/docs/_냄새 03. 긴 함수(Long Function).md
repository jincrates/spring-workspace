# ëƒ„ìƒˆ 03. ê¸´ í•¨ìˆ˜(Long Function)


- ì§§ì€ í•¨ìˆ˜ vs ê¸´ í•¨ìˆ˜
    - í•¨ìˆ˜ê°€ ê¸¸ìˆ˜ë¡ ë” ì´í•´í•˜ê¸° ì–´ë µë‹¤. vs ì§§ì€ í•¨ìˆ˜ëŠ” ë” ë§Žì€ `ë¬¸ë§¥ ì „í™˜`ì„ í•„ìš”ë¡œ í•œë‹¤.
    - â€œê³¼ê±°ì—ëŠ”" ìž‘ì€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ë” ë§Žì€ ì„œë¸Œë£¨í‹´ í˜¸ì¶œë¡œ ì¸í•œ ì˜¤ë²„í—¤ë“œê°€ ìžˆì—ˆë‹¤. 
        â‡’ ìµœê·¼ ì–¸ì–´ë“¤ì€ ìµœì í™”ê°€ ì´ë£¨ì–´ì§€ê¸° ë•Œë¬¸ì— ê³¼ê±°ë§Œí¼ ì½œìŠ¤íƒ ì˜¤ë²„í—¤ë“œë¥¼ ì‹ ê²½ ì“¸ í•„ìš”ëŠ” ì—†ë‹¤.
    - ìž‘ì€ í•¨ìˆ˜ì— â€œ`ì¢‹ì€ ì´ë¦„`"ì„ ì‚¬ìš©í–ˆë‹¤ë©´ í•¨ìˆ˜ì˜ ì½”ë“œë¥¼ ë³´ì§€ ì•Šê³ ë„ ì´í•´í•  ìˆ˜ ìžˆë‹¤.
    - ì–´ë–¤ ì½”ë“œì— â€œì£¼ì„"ì„ ë‚¨ê¸°ê³  ì‹¶ë‹¤ë©´, ì£¼ì„ ëŒ€ì‹  í•¨ìˆ˜ë¥¼ ë§Œë“¤ê³  í•¨ìˆ˜ì˜ ì´ë¦„ìœ¼ë¡œ â€œì˜ë„"ë¥¼ í‘œí˜„í•´ë³´ìž.
- ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” ë¦¬íŒ©í† ë§ ê¸°ìˆ 
    - 99%ëŠ”, â€œ`í•¨ìˆ˜ ì¶”ì¶œí•˜ê¸°(Extract Function)`â€ë¡œ í•´ê²°í•  ìˆ˜ ìžˆë‹¤.
    - í•¨ìˆ˜ë¡œ ë¶„ë¦¬í•˜ë©´ì„œ í•´ë‹¹ í•¨ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í•  ë§¤ê°œë³€ìˆ˜ê°€ ë§Žì•„ì§„ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë¦¬íŒ©í† ë§ì„ ê³ ë ¤í•´ë³¼ ìˆ˜ ìžˆë‹¤.
        - ìž„ì‹œ ë³€ìˆ˜ë¥¼ ì§ˆì˜ í•¨ìˆ˜ë¡œ ë°”ê¾¸ê¸°(Replace Temp with Query)
        - ë§¤ê°œë³€ìˆ˜ ê°ì²´ ë§Œë“¤ê¸°(Introduce Parameter Object)
        - ê°ì²´ í†µì§¸ë¡œ ë„˜ê¸°ê¸°(Preserve Whole Object)
    - â€œ`ì¡°ê±´ë¬¸ ë¶„í•´í•˜ê¸°(Decompose Conditional)`â€ë¥¼ ì‚¬ìš©í•´ ì¡°ê±´ë¬¸ì„ ë³¸ë¦¬í•  ìˆ˜ ìžˆë‹¤.
    - ê°™ì€ ì¡°ê±´ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ Switchë¬¸ì´ ìžˆë‹¤ë©´, â€œ`ì¡°ê±´ë¬¸ì„ ë‹¤í˜•ì„±ìœ¼ë¡œ ë°”ê¾¸ê¸°(Replace Conditional with Polymorphism)`â€ì„ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.
    - ë°˜ë³µë¬¸ ì•ˆì—ì„œ ì—¬ëŸ¬ ìž‘ì—…ì„ í•˜ê³  ìžˆì–´ì„œ í•˜ë‚˜ì˜ ë©”ì†Œë“œë¡œ ì¶”ì¶œí•˜ê¸° ì–´ë µë‹¤ë©´, â€œ`ë°˜ë³µë¬¸ ìª¼ê°œê¸°(Split Loop)`â€ë¥¼ ì ìš©í•  ìˆ˜ ìžˆë‹¤.


>â“ **[ìƒê°í•˜ê¸°]** 
>- í•¨ìˆ˜ê°€ ê¸¸ì–´ì§„ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ?
>- ì§§ì€ í•¨ìˆ˜ì™€ ê¸´ í•¨ìˆ˜, ì§§ì€ ì´ë¦„ê³¼ ê¸´ ì´ë¦„

## ë¦¬íŒ©í† ë§ 7. ìž„ì‹œ ë³€ìˆ˜ë¥¼ ì§ˆì˜ í•¨ìˆ˜ë¡œ ë°”ê¾¸ê¸°(Replace Temp with Query)

- ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ë°˜ë³µí•´ì„œ ë™ì¼í•œ ì‹ì„ ê³„ì‚°í•˜ëŠ” ê²ƒì„ í”¼í•  ìˆ˜ ìžˆê³ , ì´ë¦„ì„ ì‚¬ìš©í•´ ì˜ë¯¸ë¥¼ í‘œí˜„í•  ìˆ˜ë„ ìžˆë‹¤.
- ê¸´ í•¨ìˆ˜ë¥¼ ë¦¬íŒ©í† ë§í•  ë•Œ, ê·¸ëŸ¬í•œ ìž„ì‹œ ë³€ìˆ˜ë¥¼ í•¨ìˆ˜ë¡œ ì¶”ì¶œí•˜ì—¬ ë¶„ë¦¬í•œë‹¤ë©´ ë¹¼ë‚¸ í•¨ìˆ˜ë¡œ ì „ë‹¬í•´ì•¼ í•  ë§¤ê°œë³€ìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìžˆë‹¤.
    - ë§¤ê°œë³€ìˆ˜ê°€ 3ê°œ ì´ìƒì´ë©´ ì‚´ì§ ë§Žì€ê±° ê°™ë‹¤ê³  í•œë‹¤.

```java
private void print() throws IOException, InterruptedException {
		// ....
    try (FileWriter fileWriter = new FileWriter("participants.md");
         PrintWriter writer = new PrintWriter(fileWriter)) {
        //...
        participants.forEach(p -> {
            long count = p.homework().values().stream()
                    .filter(v -> v == true)
                    .count();
            double rate = count * 100 / totalNumberOfEvents;

            String markdownForHomework = String.format("| %s %s | %.2f%% |\n", p.username(), checkMark(p, totalNumberOfEvents), rate);
            writer.print(markdownForHomework);
        });
    }
}
```

```java
private void print() throws IOException, InterruptedException {
		// ....
    try (FileWriter fileWriter = new FileWriter("participants.md");
         PrintWriter writer = new PrintWriter(fileWriter)) {
        //...
        participants.forEach(p -> {
            String markdownForHomework = getMarkdownFormParticipant(totalNumberOfEvents, p);
            writer.print(markdownForHomework);
        });
    }
}

private double getRate(int totalNumberOfEvents, Participant p) {
    long count = p.homework().values().stream()
            .filter(v -> v == true)
            .count();
    double rate = count * 100 / totalNumberOfEvents;
    return rate;
}

//ìž„ì‹œ ë³€ìˆ˜ë¥¼ ì§ˆì˜ í•¨ìˆ˜ë¡œ ë°”ê¿ˆìœ¼ë¡œì¨ íŒŒë¼ë¯¸í„°ë¥¼ í•˜ë‚˜ ì¤„ì˜€ë‹¤.
private String getMarkdownFormParticipant(int totalNumberOfEvents, Participant p) {
    return String.format("| %s %s | %.2f%% |\n", p.username(), checkMark(p, totalNumberOfEvents), getRate(totalNumberOfEvents, p));
}
```

[https://github.com/jincrates/spring-workspace/commit/83116e788fe68dddabf1795fe60aeeb527207dec](https://github.com/jincrates/spring-workspace/commit/83116e788fe68dddabf1795fe60aeeb527207dec)

## ë¦¬íŒ©í† ë§ 8. ë§¤ê°œë³€ìˆ˜ ê°ì²´ ë§Œë“¤ê¸°(Introduce Parameter Object)

- ê°™ì€ ë§¤ê°œë³€ìˆ˜ë“¤ì´ ì—¬ëŸ¬ ë©”ì†Œë“œì— ê±¸ì³ ë‚˜íƒ€ë‚œë‹¤ë©´ ê·¸ ë§¤ê°œë³€ìˆ˜ë“¤ì„ ë¬¶ì€ ìžë£Œ êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìžˆë‹¤.
- ê·¸ë ‡ê²Œ ë§Œë“  ìžë£Œêµ¬ì¡°ëŠ”
    - í•´ë‹¹ ë°ì´í„° ê°„ì˜ ê´€ê²Œë³´ë‹¤ ëª…ì‹œì ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìžˆë‹¤.
    - í•¨ìˆ˜ì— ì „ë‹¬í•  ë§¤ê°œë³€ìˆ˜ ê°œìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìžˆë‹¤.
    - ë„ë©”ì¸ì„ ì´í•´í•˜ëŠ”ë° ì¤‘ìš”í•œ ì—­í• ì„ í•˜ëŠ” í´ëž˜ìŠ¤ë¡œ ë°œì „í•  ìˆ˜ë„ ìžˆë‹¤.
- ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ë•Œ `this`ë¥¼ ì‚¬ìš©í•˜ë©´ ì´ê²Œ í•„ë“œêµ¬ë‚˜ë¥¼ ì•Œê¸° ì‰½ë‹¤.

[https://github.com/jincrates/spring-workspace/commit/d513604dc5a9b7cc051f7b068c9e04d4cbbb5083](https://github.com/jincrates/spring-workspace/commit/d513604dc5a9b7cc051f7b068c9e04d4cbbb5083)


## ë¦¬íŒ©í† ë§ 9. ê°ì²´ í†µì§¸ë¡œ ë„˜ê¸°ê¸°(Preserve Whole Object)

- ì–´ë–  í•œ ë ˆì½”ë“œì—ì„œ êµ¬í•  ìˆ˜ ìžˆëŠ” ì—¬ëŸ¬ ê°’ë“¤ì„ í•¨ìˆ˜ì— ì „ë‹¬í•˜ëŠ” ê²½ìš°, í•´ë‹¹ ë§¤ê°œë³€ìˆ˜ë¥¼ ë ˆì½”ë“œ í•˜ë‚˜ë¡œ êµì²´í•  ìˆ˜ ìžˆë‹¤.
- ë§¤ê°œë³€ìˆ˜ ëª©ë¡ì„ ì¤„ì¼ ìˆ˜ ìžˆë‹¤. (í–¥í›„ì— ì¶”ê°€í• ì§€ë„ ëª¨ë¥¼ ë§¤ê°œë³€ìˆ˜ê¹Œì§€ë„â€¦)
- ì–´ì©Œë©´ í•´ë‹¹ ë©”ì†Œë“œì´ ìœ„ì¹˜ê°€ ì ì ˆí•˜ì§€ ì•Šì„ ìˆ˜ë„ ìžˆë‹¤.(ê¸°ëŠ¥ íŽ¸ì•  â€œFeature Envyâ€ ëƒ„ìƒˆì— í•´ë‹¹í•œë‹¤.)
    
    ì´ ë©”ì†Œë“œê°€ ì´ í´ëž˜ìŠ¤ì— ì˜ì¡´í•˜ëŠ” ê²ƒì´ ë§žëŠ”ê°€.?
    
    ì´ ë§¤ê°œë³€ìˆ˜ì— ì˜ì¡´í•˜ëŠ” ê²ƒì´ ë§žëŠ”ê°€?
    

[https://github.com/jincrates/spring-workspace/commit/f12aa4c18e8ae697eefc7e4f0332479cdc887393](https://github.com/jincrates/spring-workspace/commit/f12aa4c18e8ae697eefc7e4f0332479cdc887393)

## ë¦¬íŒ©í† ë§ 10. í•¨ìˆ˜ë¥¼ ëª…ë ¹ìœ¼ë¡œ ë°”ê¾¸ê¸°(Replace Function with Command)

- í•¨ìˆ˜ë¥¼ ë…ë¦½ì ì¸ ê°ì²´ì¸, Commandë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.
- `ì»¤ë§¨ë“œ íŒ¨í„´`ì„ ì ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìž¥ì ì„ ì·¨í•  ìˆ˜ ìžˆë‹¤.
    - ë¶€ê°€ì ì¸ ê¸°ëŠ¥ìœ¼ë¡œ undo ê¸°ëŠ¥ì„ ë§Œë“¤ ìˆ˜ë„ ìžˆë‹¤.
    - ë” ë³µìž¡í•œ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ”ë° í•„ìš”í•œ ì—¬ëŸ¬ ë©”ì†Œë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ìžˆë‹¤.
    - ìƒì†ì´ë‚˜ í…œí”Œë¦¿ì„ í™œìš©í•  ìˆ˜ë„ ìžˆë‹¤.
    - ë³µìž¡í•œ ë©”ì†Œë“œë¥¼ ì—¬ëŸ¬ ë©”ì†Œë“œë‚˜ í•„ë“œë¥¼ í™œìš©í•´ ìª¼ê°¤ ìˆ˜ë„ ìžˆë‹¤.
- ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì— â€œì»¤ë§¨ë“œ" ë³´ë‹¤ëŠ” â€œí•¨ìˆ˜"ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ, ì»¤ë§¨ë“œ ë§ê³  ë‹¤ë¥¸ ë°©ë²•ì´ ì—†ëŠ” ê²½ìš°ì—ë§Œ ì‚¬ìš©í•œë‹¤.

[https://github.com/jincrates/spring-workspace/commit/9629318088e461cca80787340d2823ce0c59056c](https://github.com/jincrates/spring-workspace/commit/9629318088e461cca80787340d2823ce0c59056c)

## ë¦¬íŒ©í† ë§ 11. ì¡°ê±´ë¬¸ ë¶„í•´í•˜ê¸°(Decompose Conditional)

- ì—¬ëŸ¬ ì¡°ê±´ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” ì½”ë“œë¥¼ ìž‘ì„±í•˜ë‹¤ë³´ë©´ ì¢…ì¢… ê¸´ í•¨ìˆ˜ê°€ ë§Œë“¤ì–´ì§€ëŠ” ê²ƒì„ ëª©ê²©í•  ìˆ˜ ìžˆë‹¤.
- â€œì¡°ê±´"ê³¼ â€œì•¡ì…˜" ëª¨ë‘ â€œ`ì˜ë„`"ë¥¼ í‘œí˜„í•´ì•¼ í•œë‹¤.
- ê¸°ìˆ ì ìœ¼ë¡œ â€œí•¨ìˆ˜ ì¶”ì¶œí•˜ê¸°"ì™€ ë™ì¼í•œ ë¦¬íŒ©í† ë§ì´ì§€ë§Œ ì˜ë„ì™€ ë‹¤ë¥¼ ë¿ì´ë‹¤.

[https://github.com/jincrates/spring-workspace/commit/cf86bdf62a46f9568b4e66a2d323552357c1ecb6](https://github.com/jincrates/spring-workspace/commit/cf86bdf62a46f9568b4e66a2d323552357c1ecb6)

## ë¦¬íŒ©í† ë§ 12. ë°˜ë³µë¬¸ ìª¼ê°œê¸°(Split Loop)

- í•˜ë‚˜ì˜ ë°˜ë³µë¬¸ì—ì„œ ì—¬ëŸ¬ ë‹¤ë¥¸ ìž‘ì—…ì„ í•˜ëŠ” ì½”ë“œë¥¼ ì‰½ê²Œ ì°¾ì•„ë³¼ ìˆ˜ ìžˆë‹¤.
- í•´ë‹¹ ë°˜ë³µë¬¸ì„ ìˆ˜ì •í•  ë•Œ ì—¬ëŸ¬ ìž‘ì—…ì„ ëª¨ë‘ ê³ ë ¤í•˜ë©° ì½”ë”©ì„ í•´ì•¼ í•œë‹¤.
- ë°˜ë³µë¬¸ì„ ì—¬ëŸ¬ê°œë¡œ ìª¼ê°œë©´ ë³´ë‹¤ ì‰½ê²Œ ì´í•´í•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìžˆë‹¤.
- ì„±ëŠ¥ ë¬¸ì œë¥¼ ì•¼ê¸°í•  ìˆ˜ ìžˆì§€ë§Œ, â€œë¦¬íŒ©í† ë§"ì€ â€œì„±ëŠ¥ ìµœì í™”"ì™€ ë³„ê°œì˜ ìž‘ì—…ì´ë‹¤. ë¦¬íŒ©í† ë§ì„ ë§ˆì¹œ ì´í›„ì— ì„±ëŠ¥ ìµœì í™”ë¥¼ ì‹œë„í•  ìˆ˜ ìžˆë‹¤.

[https://github.com/jincrates/spring-workspace/commit/612ce3125d22066dfa663f3861d8643d3fd445ec](https://github.com/jincrates/spring-workspace/commit/612ce3125d22066dfa663f3861d8643d3fd445ec)

## ë¦¬íŒ©í† ë§ 13. ì¡°ê±´ë¬¸ì„ ë‹¤í˜•ì„±ìœ¼ë¡œ ë°”ê¾¸ê¸°(Replace Conditional with Polymorphism)

- ì—¬ëŸ¬ íƒ€ìž…ì— ë”°ë¼ ê°ê¸° ë‹¤ë¥¸ ë¡œì§ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ê²½ìš°ì— ë‹¤í˜•ì„±ì„ ì ìš©í•´ì„œ ì¡°ê±´ë¬¸ì„ ë³´ë‹¤ ëª…í™•í•˜ê²Œ ë¶„ë¦¬í•  ìˆ˜ ìžˆë‹¤.(ì˜ˆ, ì±…, ìŒì•…, ìŒì‹ ë“±â€¦) ë°˜ë³µë˜ëŠ” switchë¬¸ì„ ê°ê¸° ë‹¤ë¥¸ í´ëž˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì œê±°í•  ìˆ˜ ìžˆë‹¤.
- ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë¡œì§ì€ ìƒìœ„ í´ëž˜ìŠ¤ì— ë‘ê³  ë‹¬ë¼ì§€ëŠ” ë¶€ë¶„ë§Œ í•˜ìœ„ í´ëž˜ìŠ¤ì— ë‘ ìœ¼ë¡œì¨, ë‹¬ë¼ì§€ëŠ” ë¶€ë¶„ë§Œ ê°•ì¡°í•  ìˆ˜ ìžˆë‹¤.
- ëª¨ë“  ì¡°ê±´ë¬¸ì„ ë‹¤í˜•ì„±ìœ¼ë¡œ ë°”ê¿”ì•¼ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

[https://github.com/jincrates/spring-workspace/commit/0121aec8d63e61435f857766d445a34728a5f7d7](https://github.com/jincrates/spring-workspace/commit/0121aec8d63e61435f857766d445a34728a5f7d7)

## ì´ ì±…ì„ ë³´ë¼ ðŸ“–

### ë°‘ì¤„ ê¸‹ê¸°

> ìš°ë¦¬ëŠ” ì£¼ì„ì„ ë‹¬ì•„ì•¼ í•  ë§Œí•œ ë¶€ë¶„ì€ ë¬´ì¡°ê±´ í•¨ìˆ˜ë¡œ ë§Œë“ ë‹¤. ê·¸ í•¨ìˆ˜ ë³¸ë¬¸ì—ëŠ” ì›ëž˜ ì£¼ì„ìœ¼ë¡œ ì„¤ëª…í•˜ë ¤ë˜ ì½”ë“œê°€ ë‹´ê¸°ê³ , í•¨ìˆ˜ ì´ë¦„ì€ ë™ìž‘ ë°©ì‹ì´ ì•„ë‹Œ â€˜ì˜ë„intentionâ€™ê°€ ë“œëŸ¬ë‚˜ê²Œ ì§“ëŠ”ë‹¤. (116)
> 

> í•¨ìˆ˜ë¡œ ë¬¶ëŠ” ì½”ë“œëŠ” ì—¬ëŸ¬ ì¤„ì¼ ìˆ˜ë„ ìžˆê³  ë‹¨ í•œ ì¤„ì¼ ìˆ˜ë„ ìžˆë‹¤. ì‹¬ì§€ì–´ ì›ëž˜ ì½”ë“œë³´ë‹¤ ê¸¸ì–´ì§€ë”ë¼ë„ í•¨ìˆ˜ë¡œ ë½‘ëŠ”ë‹¤. ë‹¨, í•¨ìˆ˜ ì´ë¦„ì— ì½”ë“œì˜ ëª©ì ì„ ë“œëŸ¬ë‚´ì•¼ í•œë‹¤. (116)
>
